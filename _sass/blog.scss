$blog-width: 880px;
@mixin tight-font {
  padding:0;
  font-size:12px;
  letter-spacing:.075rem;
}
@mixin label($dark: false) {
  margin:0;
  padding:.5rem;
  padding-left:1rem;
  font-size:0.8rem;
  letter-spacing:.036em;
  @if $dark == true {
    background:#222;
    color:#fbfbfb;
  } @else {
    background:#fff;
    color:#333;
  }
}

body.page-blog {
  background:#fbfbfb;
  color:#333;

  a {
    color:#0d5597;
  }
  a:hover {
    color:#007bff;
  }
  // Undo fixing the navbar to the top.
  padding-top:0;
  #nav-sitewide {
    position:static;
    top:auto;
    bottom:auto;
    left:auto;
    right:auto;
    z-index:auto;
  }
  .es {
    color:#666;
  }
  p.es::before {
    content:'Espa√±ol';
    display:block;
    font-size:0.75rem;
    color:#aaa;
    padding-top:1rem;
  }
}
.blog {
  // Typography.
  font-size: 17px;
  line-height: 1.52947;
  font-weight: 400;
  letter-spacing: -0.0125em;

  // Fluid images throughout.
  .blog-thumb-primary,
  .blog-body,
  .blog-gallery {
    img {
      @include fluid;
    }
  }

  // A unit which tightens the whole blog, but is opt-in.
  .unit {
    margin:1rem auto;
    max-width:$blog-width;
  }
  // This means some units can be free and stick out horizontally.
  .unit-free {
    margin:1rem auto;
  }
  @include media-breakpoint-up(md) {
    .unit {
      max-width:580px;
    }
  }

  .blog-head {
    // Spacing from the top of the page.
    margin-top:2rem;
    margin-bottom:2rem;

    .line {
      display:block;
      margin:.2rem auto;
      @include tight-font;
    }
  }
  .blog-title {
    margin:2rem auto;
  }
  .blog-thumb-primary {
    text-align:center;
    max-width:$blog-width;
  }
  .blog-scroll-for-photos {
    font-weight:bold;
    letter-spacing:.04rem;
    margin-bottom:2rem;
  }
  .blog-body {
    margin:3rem auto;
  }
  .blog-gallery {
    max-width:$blog-width;
  }
  // A caption style. Can be used inside/outside of a gallery.
  .caption {
    @include label;
    margin-bottom:1rem;
    @include border-radius-specific($position:bottom);
  }
  // Tile template.
  .tile {
    position:relative;
    @include make-container();
    .tile-contents {
      @include make-row();
    }
    .tile-photo {
      @include make-col-ready();
      @include make-col(4);
    }
    .tile-body {
      @include make-col-ready();
      @include make-col(8);
    }
    .tile-link {
      display:block;
      position:absolute;
      width:100%;
      height:100%;
      top:0;
      left:0;
      z-index:2;

      &:hover ~ .tile-body .tile-link-faux {
        background-color: #3c434a;
        border-color: #65707c;
      }
    }
    .tile-link-faux {
      font-size: .75rem;
      font-weight: 500;
      padding: .25rem .5rem;
    }
  }

  // Author credit box
  .blog-author-credit {
    margin:6rem auto;
    background:#ccc;
    padding:1rem;

    @at-root .image-circle {
      border-radius:50%;
      background-position:center center;
      background-size:cover;
    }
    .image-circle {
      width:125px;
      height:125px;
      margin:1rem auto;
    }
    .unit {
      text-align:center;
      width:80%;
    }
    .faux-link {
      @extend .btn;
      @extend .btn-dark;
      font-size: .75rem;
      font-weight: 500;
      padding: .25rem .5rem;
    }
  }

  // Social share link box
  // Set the icon sizes.
  $blog-social-icon-size: 24px;
  .blog-social {
    background:#222;
    margin:0 auto;
    margin-top:3rem;
    padding:0;
    padding-top:$blog-social-icon-size/1.3333333;
    min-height:$blog-social-icon-size * 2.5;
    text-align:center;
    width:12rem;
    border-radius:.25rem;
    @include media-breakpoint-down(md) {
      width:100%;
      border-radius:none;
    }
    .icon {
      display:inline-block;
      margin:0 $blog-social-icon-size/2;
      // Icon size changes
      background-size:$blog-social-icon-size $blog-social-icon-size;
      width:$blog-social-icon-size;
      height:$blog-social-icon-size;
    }
  }

  // Next and previous entries.
  .blog-nextup {
    margin:6rem auto;
    .col {
      padding-left:.25rem;
      padding-right:.25rem;
    }
    a, a:hover {
      color:inherit;
    }
    img {
      @include fluid;
    }
    .label {
      @include label($dark: true);
      &.top {
        @include border-radius-specific($position:top, $amount: .175rem);
        font-weight:bold;
      }
      &.bottom {
        @include border-radius-specific($position:bottom, $amount: .175rem);
      }
    }
    .next {
      text-align:right;
    }
  }
}


//
// BLOG index
// /post/index.html
//
.blog-index {
  max-width:1000px;
  @include make-container();

  .items {
    @include make-row();
    margin-left:auto;
    margin-right:auto;
  }
  .item {
    @include make-col-ready();
    @include make-row();

    background-color: #fff;
    border-radius: 3px;
    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1), 0 1px 8px rgba(0, 0, 0, 0.1);

    margin:2rem auto;
    &:first-of-type {
      margin-top:0;
    }

    @include media-breakpoint-down(md) {
      padding:0;
    }

    // First, widths
    .info {
      @include make-col(12);
      @include media-breakpoint-up(md) {
        @include make-col(4);
      }
    }
    .image {
      @include make-col(12);
      @include media-breakpoint-up(md) {
        @include make-col(8);
      }
    }
    // Then styling.
    .info {
      padding:1rem;
      .title {
        font-size:1.5rem;
        margin-top:1rem;
        margin-bottom:2rem;
        margin-right:1.5rem;
      }
      .line {
        @include tight-font;
        line-height:.8rem;
      }
      // Read more button
      .action {
        color:#eee;
        display:block;
        width:75%;
        margin-top:4rem;
        @include media-breakpoint-down(md) {
          width:100%;
          margin:2rem auto;
        }
        &:hover {
          color:#fff;
        }
      }
    }

  }
}
